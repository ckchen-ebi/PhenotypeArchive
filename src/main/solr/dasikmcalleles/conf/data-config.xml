<dataConfig>

	<dataSource jndiName="java:comp/env/jdbc/komp2DataSource" />

	<document name="komp2_indexing">
		<!-- mp to gene data from Europhenome -->
		<entity name="genomic_feature" query="select acc, symbol, name from genomic_feature where db_id=3 and biotype_db_id=2 and biotype_acc !=20 and subtype_acc !=20">
			<field column="acc" name="mgi_accession_id" />
			<field column="symbol" name="marker_symbol" />
			<field column="name" name="marker_name" />
			<entity name="synonym" query="select distinct symbol from synonym where acc='${genomic_feature.acc}'">
				<field column="symbol" name="marker_synonym" />
			</entity>
			<entity name="phenotype_call_summary" query="select distinct mp_acc from phenotype_call_summary where gf_acc='${genomic_feature.acc}'">
				<field column="mp_acc" name="mp_id" />
				<entity name="ontology_term" query="select distinct acc, name from ontology_term where acc='${phenotype_call_summary.mp_acc}' and is_obsolete=0">
					<field column="name" name="mp_term" />
					<entity name="synonym" query="select distinct symbol from synonym where acc='${ontology_term.acc}'">
						<field column="symbol" name="mp_term_synonym" />
					</entity>
				</entity>
			</entity>
        </entity>
	</document>

</dataConfig>
